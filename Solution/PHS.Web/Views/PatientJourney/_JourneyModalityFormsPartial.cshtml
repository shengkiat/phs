@model PHS.Business.ViewModel.PatientJourney.PatientEventViewModel
@using PHS.Business.ViewModel.PatientJourney
@using PHS.FormBuilder.Helpers
@using PHS.FormBuilder.Extensions
@using GridMvc.Html


@{
    ViewBag.Title = "Modality Forms";
}

<script>
        function resizeIframe(obj) {
            obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
        }
</script>

@using (Html.BeginForm())
{

    <div id="ptForms">

        <ul data-tabs="tabs" class="nav nav-tabs">
            @{
                int counter = 1;

                foreach (var element in Model.GetModalityFormsForTabs(50))
                {
                    if (counter == 1)
                    {
                        <li class="active"><a data-toggle="tab" href="#tabs-@counter">@element.FormID</a></li>
                    }

                    else
                    {
                        <li><a data-toggle="tab" href="#tabs-@counter">@element.FormID</a></li>
                    }


                    counter = counter + 1;
                }
            }
            
        </ul>

        <div class="tab-content">
            @{
                int anothercounter = 1;

                foreach (var element in Model.GetModalityFormsForTabs(50))
                {
                    if (anothercounter == 1)
                    {
                        <div id="tabs-@anothercounter" class="tab-pane fade in active">
                            <iframe id="form-builder-frame" onload="resizeIframe(this)"
                                    src="@Url.HttpRouteUrl("journeymodality-viewform", new { embed=true, formId=element.FormID })"
                                    frameborder="0"
                                    width="100%"
                                    marginheight="0"
                                    marginwidth="0"
                                    scrolling="yes"></iframe>
                        </div>
                    }

                    else
                    {
                        <div id="tabs-@anothercounter" class="tab-pane fade">
                            
                        </div>
                    }

                    anothercounter = anothercounter + 1;
                }
            }

        </div>
   </div>
}

