@model PHS.DB.ViewModels.Form.TemplateFieldViewModel
@using PHS.Business.Extensions

@{
    int columnCounter = 0;
    int rowCounter = 0;
    string checkedAttribute = "";
    var disabledAttribute = Model.IsReadOnlyMode() ? "disabled=\"disabled\"" : "";
    List<string> columnChoices = new List<string>();
}

<div style="width: 70%; word-wrap: break-word; text-align: left;"
     data-sub-channel="sub-label-@Model.DomId"
     class="label editable">@Model.Label</div>

    <span class="required @Model.IsRequired.OutputIfTrue(" visible","hidden")">*</span>

    <div class="input" style="width: 80%;">

        <table class="matrix-list">
            <tr>
                <th></th>

                @foreach (var column in Model.MatrixColumn.Split(","))
                {
                    columnCounter++;
                    columnChoices.Add(column);
                    <th style="padding: 0px 0px 0px 12px;">@column</th>
                }
            </tr>

            @foreach (var row in Model.MatrixRow.Split(","))
            {
                <tr>
                    <td>
                        @row
                    </td>

                    @for (var i = 0; i < columnCounter; i++)
                    {

                        if (Html.IsSubmittedValueSelected(Model, @columnChoices[@i], @rowCounter))
                        {
                            checkedAttribute = "checked=\"checked\"";
                        }
                        else
                        {
                            checkedAttribute = "";
                        }


                        <td>
                            <input name="SubmitFields[@Model.DomId].[@rowCounter].RadioButton" 
                                   @checkedAttribute @disabledAttribute
                                   value=@columnChoices[@i]
                                   type="radio" />
                        </td>
                    }
                </tr>

                rowCounter++;
            }
        </table>

        @if (Model.IsEditMode())
        {
            @Html.Partial("_form-field-properties-partial", Model)
        }

        @if (!Model.Errors.IsNullOrEmpty())
        {
            <span class="field-validation-error">@Model.Errors</span>
        }
    </div>
    <a href="javascript:void(0);" title="@Model.HelpText" class="help-icon-1 help-icon @Model.HelpText.OutputIfIs(" ", " hide") w-tip">
        <img src="@Html.SpacerImage()" alt="help" />
    </a>

    @if (Model.IsEditMode())
    {
        @Html.Partial("_form-field-settings-template")
    }


